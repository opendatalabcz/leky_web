CREATE TABLE IF NOT EXISTS processed_dataset (
    id              BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at      TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    dataset_type    VARCHAR(50) NOT NULL CHECK (dataset_type IN
                                                ('ERECEPT_PRESCRIPTION', 'ERECEPT_DISPENSE',
                                                'DISTRIBUTION_REG', 'DISTRIBUTION_DIS',
                                                'DISTRIBUTION_DIS_ABROAD', 'DISTRIBUTION_LEK',
                                                'MPD')
    ),
    year            INT NOT NULL,
    month           INT NOT NULL,
    CONSTRAINT processed_dataset_dataset_type_year_month_uq UNIQUE (dataset_type, year, month)
);

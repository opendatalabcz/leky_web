CREATE TYPE dataset_type AS ENUM (
    'ERECEPT_PREDPIS', 'ERECEPT_VYDEJ', 'DISTRIBUCE_REG', 'DISTRIBUCE_DIS', 'DISTRIBUCE_DIS_ZAHRANICI', 'DISTRIBUCE_LEK'
);

CREATE TABLE IF NOT EXISTS processed_dataset (
    id              BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at      TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    dataset_type    dataset_type NOT NULL,
    year            INT NOT NULL,
    month           INT NOT NULL,
    CONSTRAINT processed_dataset_dataset_type_year_month_uq UNIQUE (dataset_type, year, month)
);
